<!DOCTYPE html>
<html>
<head>
<title>Order | Karavali Vogue</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    padding:20px;
    font-family:Arial;
    background:#f5f5f5;
}

/* Header */
header{
    background:#7b2d26;
    color:white;
    padding:12px;
    margin:-20px -20px 20px -20px;
}

.logo{
    display:flex;
    align-items:center;
    gap:10px;
}

.logo img{
    width:40px;
    height:40px;
    border-radius:50%;
}

/* Order Card */
.order-card{
    background:white;
    padding:20px;
    border-radius:10px;
    box-shadow:0 0 6px #ccc;
    margin-bottom:15px;
    width: 300px;
    margin-left: auto;
    margin-right: auto;

}
.product{
    max-width:300px;
    margin:20px auto;
    padding:15px;
    border-radius:8px;
    background:#fff;
    box-shadow:0 2px 5px rgba(0,0,0,0.1);
    text-align:center;
}

.product img{
    width:100%;
    height:200px;
    object-fit:cover;
    border-radius:8px;
}

/* Product summary */
.product-summary{
    background:#fffaf7;
    padding:15px;
    border-radius:8px;
    margin-bottom:15px;
}

.product-summary h4{
    margin:0 0 5px 0;
}

/* Inputs */
input, textarea{
    width:100%;
    padding:12px;
    margin:12px 0;
    border:1.5px solid #999;
    border-radius:6px;
    font-size:15px;
    box-sizing:border-box;
    background:#fff;
}

input:focus, textarea:focus{
    outline:none;
    border-color:#7b2d26;
}

/* Button */
button{
    width:100%;
    padding:12px;
    background:#7b2d26;
    color:white;
    border:none;
    border-radius:6px;
    font-size:16px;
    cursor:pointer;
}

/* Bottom Nav */
.bottom-nav{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    background:#7b2d26;
    display:flex;
    justify-content:space-around;
    padding:12px 0;
}


.bottom-nav a{
    color:white;
    text-decoration:none;
    font-size:16px;
}

</style>

<script>
function renderOrder(){
    let cart = JSON.parse(localStorage.getItem("cartItems")) || [];
    let summaryDiv = document.getElementById("product-summary");
    let total = 0;

    if(cart.length === 0){
        summaryDiv.innerHTML = "<p>No products selected</p>";
        return;
    }

    summaryDiv.innerHTML = "";

    cart.forEach((item, index) => {
        let itemTotal = item.price * item.qty;
        total += itemTotal;

        summaryDiv.innerHTML += `
        <div style="margin-bottom:15px;">
            <img src="${item.image}" style="width:100%;height:180px;object-fit:cover;border-radius:8px;">
            <h4>${item.name}</h4>
            <p>‚Çπ${item.price} √ó ${item.qty}</p>
            <p><b>‚Çπ${itemTotal}</b></p>
            <button onclick="removeItem(${index})"
                    style="background:#c0392b;">Remove</button>
        </div>
        `;
    });

    summaryDiv.innerHTML += `<h3>Total: ‚Çπ${total}</h3>`;
}

function removeItem(index){
    let cart = JSON.parse(localStorage.getItem("cartItems"));
    cart.splice(index, 1);
    localStorage.setItem("cartItems", JSON.stringify(cart));
    renderOrder();
}

window.onload = function(){
    renderOrder();
};

function placeOrder(){
    let name = document.getElementById("name").value.trim();
    let phone = document.getElementById("phone").value.trim();
    let address = document.getElementById("address").value.trim();
    let payment = document.querySelector('input[name="payment"]:checked').value;

    if(name === "" || phone === "" || address === ""){
        alert("Please fill all details");
        return;
    }

    let cart = JSON.parse(localStorage.getItem("cartItems")) || [];
    if(cart.length === 0){
        alert("Cart is empty");
        return;
    }

    let now = new Date();
    let orderId = "KV" + Math.floor(100000 + Math.random() * 900000);

    let orderData = {
        orderId: orderId,
        date: now.toLocaleDateString(),
        time: now.toLocaleTimeString(),
        payment: payment,
        items: cart
    };

    // ‚úÖ SAVE TO ORDER HISTORY
    let history = JSON.parse(localStorage.getItem("orderHistory")) || [];
    history.push(orderData);
    localStorage.setItem("orderHistory", JSON.stringify(history));

    // ‚úÖ SAVE LAST ORDER
    localStorage.setItem("lastOrder", JSON.stringify(orderData));
    localStorage.removeItem("cartItems");

    window.location.href = "order-summary.html";
}
</script>



</head>
<body>

<header>
    <div class="logo">
        <img src="images/logo.png" alt="Logo">
        <h3>Karavali Vogue</h3>
    </div>
</header>

<div class="order-card">

    <h2>Place Order</h2>

    <!-- Product details from cart -->
    <div class="product-summary" id="product-summary"></div>

    <!-- Customer details -->
    <input id="name" placeholder="Name">
    <input id="phone" placeholder="Phone">
    <textarea id="address" placeholder="Address"></textarea>
    <h3>Payment Method</h3>

<label>
  <input type="radio" name="payment" value="COD" checked>
  Cash on Delivery
</label><br><br>

<label>
  <input type="radio" name="payment" value="UPI">
  UPI
</label><br><br>

<label>
  <input type="radio" name="payment" value="Card">
  Debit / Credit Card
</label>
<br><br>

    <button onclick="placeOrder()">Confirm Order</button>
    

</div>
<div class="product-summary" id="product-summary"></div>


<div class="bottom-nav">
    <a href="index.html">üè† Home</a>
    <a href="cart.html">üõí Cart</a>
</div>

</body>
</html>
